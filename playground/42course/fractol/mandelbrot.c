#include <stdio.h>
#include <stdlib.h>
#include <complex.h>

#define ITERATIONS 10


// Function to determine if a point belongs to the Mandelbrot Set
int mandelbrot(double complex c) {
    double complex z = 0;
    int n;
    for (n = 0; n < ITERATIONS; n++) {
        if (abs(z) > 2.0) break; // Point escapes to infinity
        z = z * z + c;
    }
    return n; // Number of iterations before escape
}

int main() {
    // Set the size of the image and the scale for the complex plane
    int width = 50, height = 50;
    double minReal = -2.0, maxReal = 1.0, minImaginary = -1.0, maxImaginary = 1.0;

    // Iterate over each pixel
    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            double real = minReal + (x / (width - 1.0)) * (maxReal - minReal);
            double imaginary = minImaginary + (y / (height - 1.0)) * (maxImaginary - minImaginary);
            double complex c = real + imaginary * I;

            int m = mandelbrot(c);

            // Print a character based on the return value
            printf("%s", (m ==  ITERATIONS) ? "." : " "); // Simple text-based output
        }
        printf("\n");
    }
    return 0;
}

/*
Linear interpolation is used to map pixel coordinates to complex numbers.
The real and imaginary parts of the complex number are calculated using the following formulas:

real = minReal + (x / (width - 1.0)) * (maxReal - minReal)
x = 0 real = -2.0 + (0 / 49.0) * (1.0 - -2.0) = -2.0
x = 1 real = -2.0 + (1 / 49.0) * (1.0 - -2.0) = -1.918367
x = 2 real = -2.0 + (2 / 49.0) * (1.0 - -2.0) = -1.836735
x = 3 real = -2.0 + (3 / 49.0) * (1.0 - -2.0) = -1.755102
x = 4 real = -2.0 + (4 / 49.0) * (1.0 - -2.0) = -1.673469
x = 5 real = -2.0 + (5 / 49.0) * (1.0 - -2.0) = -1.591837
x = 6 real = -2.0 + (6 / 49.0) * (1.0 - -2.0) = -1.510204
x = 7 real = -2.0 + (7 / 49.0) * (1.0 - -2.0) = -1.428571
x = 8 real = -2.0 + (8 / 49.0) * (1.0 - -2.0) = -1.346939
x = 9 real = -2.0 + (9 / 49.0) * (1.0 - -2.0) = -1.265306
x = 10 real = -2.0 + (10 / 49.0) * (1.0 - -2.0) = -1.183673
x = 11 real = -2.0 + (11 / 49.0) * (1.0 - -2.0) = -1.102041
x = 12 real = -2.0 + (12 / 49.0) * (1.0 - -2.0) = -1.020408
x = 13 real = -2.0 + (13 / 49.0) * (1.0 - -2.0) = -0.938776
x = 14 real = -2.0 + (14 / 49.0) * (1.0 - -2.0) = -0.857143
x = 15 real = -2.0 + (15 / 49.0) * (1.0 - -2.0) = -0.775510
x = 16 real = -2.0 + (16 / 49.0) * (1.0 - -2.0) = -0.693878
x = 17 real = -2.0 + (17 / 49.0) * (1.0 - -2.0) = -0.612245
x = 18 real = -2.0 + (18 / 49.0) * (1.0 - -2.0) = -0.530612
x = 19 real = -2.0 + (19 / 49.0) * (1.0 - -2.0) = -0.448980
x = 20 real = -2.0 + (20 / 49.0) * (1.0 - -2.0) = -0.367347
x = 21 real = -2.0 + (21 / 49.0) * (1.0 - -2.0) = -0.285714
x = 22 real = -2.0 + (22 / 49.0) * (1.0 - -2.0) = -0.204082
x = 23 real = -2.0 + (23 / 49.0) * (1.0 - -2.0) = -0.122449
x = 24 real = -2.0 + (24 / 49.0) * (1.0 - -2.0) = -0.040816
x = 25 real = -2.0 + (25 / 49.0) * (1.0 - -2.0) = 0.040816
x = 26 real = -2.0 + (26 / 49.0) * (1.0 - -2.0) = 0.122449
x = 27 real = -2.0 + (27 / 49.0) * (1.0 - -2.0) = 0.204082
x = 28 real = -2.0 + (28 / 49.0) * (1.0 - -2.0) = 0.285714
x = 29 real = -2.0 + (29 / 49.0) * (1.0 - -2.0) = 0.367347
x = 30 real = -2.0 + (30 / 49.0) * (1.0 - -2.0) = 0.448980
x = 31 real = -2.0 + (31 / 49.0) * (1.0 - -2.0) = 0.530612
x = 32 real = -2.0 + (32 / 49.0) * (1.0 - -2.0) = 0.612245
x = 33 real = -2.0 + (33 / 49.0) * (1.0 - -2.0) = 0.693878
x = 34 real = -2.0 + (34 / 49.0) * (1.0 - -2.0) = 0.775510
x = 35 real = -2.0 + (35 / 49.0) * (1.0 - -2.0) = 0.857143
x = 36 real = -2.0 + (36 / 49.0) * (1.0 - -2.0) = 0.938776
x = 37 real = -2.0 + (37 / 49.0) * (1.0 - -2.0) = 1.020408
x = 38 real = -2.0 + (38 / 49.0) * (1.0 - -2.0) = 1.102041
x = 39 real = -2.0 + (39 / 49.0) * (1.0 - -2.0) = 1.183673
x = 40 real = -2.0 + (40 / 49.0) * (1.0 - -2.0) = 1.265306
x = 41 real = -2.0 + (41 / 49.0) * (1.0 - -2.0) = 1.346939
x = 42 real = -2.0 + (42 / 49.0) * (1.0 - -2.0) = 1.428571
x = 43 real = -2.0 + (43 / 49.0) * (1.0 - -2.0) = 1.510204
x = 44 real = -2.0 + (44 / 49.0) * (1.0 - -2.0) = 1.591837
x = 45 real = -2.0 + (45 / 49.0) * (1.0 - -2.0) = 1.673469
x = 46 real = -2.0 + (46 / 49.0) * (1.0 - -2.0) = 1.755102
x = 47 real = -2.0 + (47 / 49.0) * (1.0 - -2.0) = 1.836735
x = 48 real = -2.0 + (48 / 49.0) * (1.0 - -2.0) = 1.918367
x = 49 real = -2.0 + (49 / 49.0) * (1.0 - -2.0) = 2.0

imaginary = minImaginary + (y / (height - 1.0)) * (maxImaginary - minImaginary)
y = 0 imaginary = -1.0 + (0 / 49.0) * (1.0 - -1.0) = -1.0
y = 1 imaginary = -1.0 + (1 / 49.0) * (1.0 - -1.0) = -0.959184
y = 2 imaginary = -1.0 + (2 / 49.0) * (1.0 - -1.0) = -0.918367
y = 3 imaginary = -1.0 + (3 / 49.0) * (1.0 - -1.0) = -0.877551
y = 4 imaginary = -1.0 + (4 / 49.0) * (1.0 - -1.0) = -0.836735
y = 5 imaginary = -1.0 + (5 / 49.0) * (1.0 - -1.0) = -0.795918
y = 6 imaginary = -1.0 + (6 / 49.0) * (1.0 - -1.0) = -0.755102
y = 7 imaginary = -1.0 + (7 / 49.0) * (1.0 - -1.0) = -0.714286
y = 8 imaginary = -1.0 + (8 / 49.0) * (1.0 - -1.0) = -0.673469
y = 9 imaginary = -1.0 + (9 / 49.0) * (1.0 - -1.0) = -0.632653
y = 10 imaginary = -1.0 + (10 / 49.0) * (1.0 - -1.0) = -0.591837
y = 11 imaginary = -1.0 + (11 / 49.0) * (1.0 - -1.0) = -0.551020
y = 12 imaginary = -1.0 + (12 / 49.0) * (1.0 - -1.0) = -0.510204
y = 13 imaginary = -1.0 + (13 / 49.0) * (1.0 - -1.0) = -0.469388
y = 14 imaginary = -1.0 + (14 / 49.0) * (1.0 - -1.0) = -0.428571
y = 15 imaginary = -1.0 + (15 / 49.0) * (1.0 - -1.0) = -0.387755
y = 16 imaginary = -1.0 + (16 / 49.0) * (1.0 - -1.0) = -0.346939
y = 17 imaginary = -1.0 + (17 / 49.0) * (1.0 - -1.0) = -0.306122
y = 18 imaginary = -1.0 + (18 / 49.0) * (1.0 - -1.0) = -0.265306
y = 19 imaginary = -1.0 + (19 / 49.0) * (1.0 - -1.0) = -0.224490
y = 20 imaginary = -1.0 + (20 / 49.0) * (1.0 - -1.0) = -0.183673
y = 21 imaginary = -1.0 + (21 / 49.0) * (1.0 - -1.0) = -0.142857
y = 22 imaginary = -1.0 + (22 / 49.0) * (1.0 - -1.0) = -0.102041
y = 23 imaginary = -1.0 + (23 / 49.0) * (1.0 - -1.0) = -0.061224
y = 24 imaginary = -1.0 + (24 / 49.0) * (1.0 - -1.0) = -0.020408
y = 25 imaginary = -1.0 + (25 / 49.0) * (1.0 - -1.0) = 0.020408
y = 26 imaginary = -1.0 + (26 / 49.0) * (1.0 - -1.0) = 0.061224
y = 27 imaginary = -1.0 + (27 / 49.0) * (1.0 - -1.0) = 0.102041
y = 28 imaginary = -1.0 + (28 / 49.0) * (1.0 - -1.0) = 0.142857
y = 29 imaginary = -1.0 + (29 / 49.0) * (1.0 - -1.0) = 0.183673
y = 30 imaginary = -1.0 + (30 / 49.0) * (1.0 - -1.0) = 0.224490
y = 31 imaginary = -1.0 + (31 / 49.0) * (1.0 - -1.0) = 0.265306
y = 32 imaginary = -1.0 + (32 / 49.0) * (1.0 - -1.0) = 0.306122
y = 33 imaginary = -1.0 + (33 / 49.0) * (1.0 - -1.0) = 0.346939
y = 34 imaginary = -1.0 + (34 / 49.0) * (1.0 - -1.0) = 0.387755
y = 35 imaginary = -1.0 + (35 / 49.0) * (1.0 - -1.0) = 0.428571
y = 36 imaginary = -1.0 + (36 / 49.0) * (1.0 - -1.0) = 0.469388
y = 37 imaginary = -1.0 + (37 / 49.0) * (1.0 - -1.0) = 0.510204
y = 38 imaginary = -1.0 + (38 / 49.0) * (1.0 - -1.0) = 0.551020
y = 39 imaginary = -1.0 + (39 / 49.0) * (1.0 - -1.0) = 0.591837
y = 40 imaginary = -1.0 + (40 / 49.0) * (1.0 - -1.0) = 0.632653
y = 41 imaginary = -1.0 + (41 / 49.0) * (1.0 - -1.0) = 0.673469
y = 42 imaginary = -1.0 + (42 / 49.0) * (1.0 - -1.0) = 0.714286
y = 43 imaginary = -1.0 + (43 / 49.0) * (1.0 - -1.0) = 0.755102
y = 44 imaginary = -1.0 + (44 / 49.0) * (1.0 - -1.0) = 0.795918
y = 45 imaginary = -1.0 + (45 / 49.0) * (1.0 - -1.0) = 0.836735
y = 46 imaginary = -1.0 + (46 / 49.0) * (1.0 - -1.0) = 0.877551
y = 47 imaginary = -1.0 + (47 / 49.0) * (1.0 - -1.0) = 0.918367
y = 48 imaginary = -1.0 + (48 / 49.0) * (1.0 - -1.0) = 0.959184
y = 49 imaginary = -1.0 + (49 / 49.0) * (1.0 - -1.0) = 1.0
*/
